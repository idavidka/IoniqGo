{"version":3,"sources":["App.module.scss","components/Icon.module.scss","components/Icon.js","utils.js","components/LottieIcon.js","components/Loader.js","components/Apps.js","config.js","hooks/use-templates.js","components/ActionChart.js","components/Actions.js","components/Backups.js","components/icons/marker-yellow.svg","components/icons/marker-green.svg","components/icons/marker-blue.svg","components/icons/marker-red.svg","components/Map.js","components/ActionRun.js","components/Loader-White.js","App.js","reportWebVitals.js","index.js","components/Map.module.scss","components/ActionChart.module.scss","components/Loader.module.scss"],"names":["module","exports","Icons","Gi","ImPrinter","RiPrinterFill","RiBitCoinFill","SiRevolut","MdBackup","Icon","label","app","link","icon","noClick","background","foreground","details","isSingle","rest","onClick","undefined","e","preventDefault","document","location","time","Date","getTime","Promise","resolve","reject","setTimeout","hasFocus","catch","CustomIcon","className","Style","Container","Single","Double","style","color","length","map","detail","index","value","hiddenElse","title","isNil","appendix","valueLoader","Label","href","target","rel","getPageUrl","page","credentials","path","authPath","username","key","getPagePath","normalPath","mappedCallbacks","_","found","keyLast","obj","last","Object","keys","first","mappedKeys","get","console","show","content","operation","object","check","JSON","parse","stringify","replacedKey","forEach","mappedKey","mappedRegex","RegExp","foundKey","match","groups","rule","mainKey","split","mainObj","lGet","includes","params","html","querySelector","innerHTML","err","Array","isArray","reduce","acc","loopObj","add","newKey","newObj","newAdd","parseFloat","newValue","isNaN","set","replace","window","moment","abbreviation","givenValue","precision","suffixes","isFinite","flooredValue","Math","floor","suffixNum","shortValue","pow","toPrecision","toFixed","suffix","sourceValue","formatters","format","isValid","currency","isChart","chartOptions","maximumFractionDigits","Intl","NumberFormat","percent","isTrue","findKey","innerWidth","find","test","getColorForPercentage","perc","r","g","round","b","toString","slice","getDistance","origin","destination","lon1","toRadian","lat1","lon2","lat2","deltaLat","deltaLon","a","sin","cos","asin","sqrt","degree","PI","isDatumEnableInChart","datum","formatter","today","getChartData","data","filter","LottieIcon","name","colors","props","warn","lottieColors","getColors","curr","replaceColor","toHex","m","autoplay","src","speed","Loader","hidden","iconClassName","loader","loop","Apps","apps","isLoggedIn","useState","isLoading","setIsLoading","useEffect","iconStyle","fontSize","width","height","getSiteUrl","protocol","ENABLED_PAGES","actions","backups","getResponseBody","subjects","usedSubject","body","usedKey","indexOf","parseTemplatesUtil","possibleTemplates","isOnDemand","newTemplatesCache","newTemplates","lastSubject","status","headers","main","statusText","push","parents","possibleTemplate","parent_id","children","validValue","validLabel","dependsOn","valueDependsOn","formatterParams","valueIf","labelElse","valueElse","id","templateId","arrayValues","entries","templateKey","templateValue","formattedValue","keyLabel","reducedTemplates","reduceTemplates","templates","level","isChild","useTemplates","setTemplates","parseTemplates","useCallback","chartColors","ActionChart","rawData","rawDataMax","dataMax","rawDataMin","dataMin","colorProp","isIcon","isMobile","setIsMobile","templateObject","useMemo","settings","validColor","matchedColor","setIsMobileDebounced","debounce","trailing","addEventListener","removeEventListener","getColor","minMax","returnValue","values","template_id","max","min","domain","ResponsiveContainer","ComposedChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","tickFormatter","Tooltip","items","payload","Items","Item","Name","Value","Appendix","valueId","setting","Area","type","yAxisId","stroke","strokeWidth","fill","fillOpacity","Actions","runners","token","groupsRef","useRef","browserHistory","useHistory","onDemandFetchings","onDemandsRef","ls","onDemands","setOnDemands","lastFetched","setLastFetched","windowWidth","setWindowWidth","resize","currentWindowWidth","current","groupRef","scrollWidth","fetchOnDemands","runner","onDemand","runner_key","parseInt","now","fetch","method","Authorization","then","resp","json","responses","response","delay","getOnDemand","runnerKey","onDemandRunner","getGroups","groupedRunners","groupId","group","order","groupName","chartData","single","onDoubleClick","to","added","transitionDelay","IconChart","template","isEmpty","entry","createRef","ref","Group","groupid","GroupName","GroupItems","Backups","groupedBackups","backup","newGroup","days","day","controlsInstance","Leaflet","Control","extend","options","position","onAdd","container","DomUtil","create","setAttribute","closeButton","classList","onclick","onClicks","close","append","MapController","noControl","center","heatmapData","lastCenter","heatmapLayer","useMapEvents","locationfound","log","controlsContainer","setView","scrollWheelZoom","dragging","zoomControl","removeControl","addControl","removeFrom","heatLayer","addTo","Map","fullSize","setMap","linesRef","linesCoordsRef","routedLines","controlsRef","markersRef","speedMinMax","absSpeed","abs","Speed","getSpeedPercent","polygonData","newData","segment","hasCharging","prevData","nextData","newPoint","diff","lastPoint","newDatum","markerColor","start","end","distance","addLineToRef","segmentId","line","coords","lineKey","addMarkerToRef","selectSegment","hover","setStyle","opacity","bringToFront","marker","setOpacity","getIcon","BlueIcon","RedIcon","GreenIcon","YellowIcon","DivIcon","markerIcon","markerLabel","iconSize","iconAnchor","popupAnchor","lastDatum","lastPolygonDatum","findAllDatum","findLast","onSnap","chunk","lineChunks","concat","lineChunk","styles","weight","control","Routing","waypoints","waypointMode","fitSelectedRoutes","lineOptions","draggableWaypoints","addWaypoints","showAlternatives","createStepsContainer","createStep","createMarker","on","loopControl","FullScreen","MapContainer","whenCreated","zoom","doubleClickZoom","TileLayer","attribution","url","Polyline","pathOptions","eventHandlers","positions","pos","posInd","Marker","mouseover","mouseout","Popup","class","marketPopupTitle","markerPopupDetail","snap","ActionRun","isDone","fullScreen","setFullScreen","commandState","setCommandState","signalController","setSignalController","setResponses","mapTop","setMapTop","responsesRef","periodicalCounter","launch","secLeft","setTime","canMoveBack","setCanMoveBack","runnerData","setRunnerData","setAll","state","scrollY","templateColors","uniqBy","decrement","clearInterval","runAction","next","inBackground","counter","controller","AbortController","signal","concatResponses","startTimer","error","periodicalFetch","setInterval","periodical","resetTimer","newResponses","shouldDo","spread","updatedResponses","isDark","dataPack","mainLevelTemplates","mapData","payloads","templateLabel","nextDatum","onClickMap","renderTemplates","templateArray","templateWrapper","dark","childTemplate","hostname","Action","keepLastFrame","chart","buttons","abort","LoaderWhite","App","setToken","setIsLoggedIn","setRunners","setApps","setBackups","setIsFullScreen","queryString","URLSearchParams","search","handleToken","checkRegex","join","checkCredentials","pathname","remove","dispatchEvent","Event","onRefresh","reload","PTR","isPullable","pullingContent","textAlign","padding","refreshingContent","titles","activeClassName","active","render","selectedRunner","action","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cc443043.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__15LM-\",\"PTR\":\"App_PTR__3DiNv\",\"titles\":\"App_titles__2hlUP\",\"active\":\"App_active__2jQ78\",\"Apps\":\"App_Apps__1nMvU\",\"Group\":\"App_Group__37e0G\",\"GroupName\":\"App_GroupName__XHBqY\",\"GroupItems\":\"App_GroupItems__2qaq6\",\"IconChart\":\"App_IconChart__iwFi-\",\"Action\":\"App_Action__4rkid\",\"templates\":\"App_templates__3m_6a\",\"templateWrapper\":\"App_templateWrapper__11lR-\",\"template\":\"App_template__1yyfm\",\"map\":\"App_map__L7vHB\",\"fullScreenMap\":\"App_fullScreenMap__2GyWs\",\"hidden\":\"App_hidden__2nbms\",\"label\":\"App_label__2IDal\",\"value\":\"App_value__2mMSL\",\"appendix\":\"App_appendix__15_Hf\",\"dark\":\"App_dark__22_2O\",\"chart\":\"App_chart__2j3Yu\",\"buttons\":\"App_buttons__1l0RY\",\"pulsing\":\"App_pulsing__d8MNR\",\"fullScreen\":\"App_fullScreen__1nR4q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Icon_Container__2ecUl\",\"Icon\":\"Icon_Icon__2cVgq\",\"detail\":\"Icon_detail__1lmwT\",\"label\":\"Icon_label__17VEa\",\"value\":\"Icon_value__1yEt1\",\"valueLoader\":\"Icon_valueLoader__2f53p\",\"Label\":\"Icon_Label__3S3h2\",\"Double\":\"Icon_Double__3FqSb\",\"pulsing\":\"Icon_pulsing__2yQ5g\"};","import { isNil } from \"lodash\";\nimport Style from \"./Icon.module.scss\";\nimport * as Gi from \"react-icons/gi\";\nimport { RiPrinterFill, RiBitCoinFill } from \"react-icons/ri\";\nimport { ImPrinter } from \"react-icons/im\";\nimport { SiRevolut } from \"react-icons/si\";\nimport { MdBackup } from \"react-icons/md\";\n\nconst Icons = {\n  ...Gi,\n  ImPrinter,\n  RiPrinterFill,\n  RiBitCoinFill,\n  SiRevolut,\n  MdBackup,\n};\n\nfunction Icon({\n  label,\n  app,\n  link,\n  icon,\n  noClick,\n  background,\n  foreground,\n  details,\n  isSingle,\n  ...rest\n}) {\n  const onClick = noClick\n    ? undefined\n    : (e) => {\n        if (app) {\n          e.preventDefault();\n\n          document.location = app;\n\n          if (link) {\n            const time = new Date().getTime();\n\n            new Promise((resolve, reject) => {\n              setTimeout(function () {\n                const now = new Date().getTime();\n                if (now - time < 2500 && document.hasFocus()) {\n                  reject();\n                } else {\n                  resolve();\n                }\n              }, 2000);\n            }).catch(() => {\n              document.location = link;\n            });\n          }\n        }\n\n        if (!app && !link) {\n          e.preventDefault();\n        }\n      };\n\n  const CustomIcon =\n    typeof icon === \"string\" ? Icons[icon] || null : icon || null;\n\n  return noClick ? (\n    <div className={Style.Container}>\n      <div\n        className={`${Style.Icon} ${isSingle ? Style.Single : Style.Double}`}\n        style={{\n          background: background ?? null,\n          color: foreground ?? null,\n        }}\n      >\n        <CustomIcon {...rest} />\n        {details?.length &&\n          details.map((detail, index) => {\n            if (!detail.value && detail.hiddenElse) {\n              return null;\n            }\n\n            return (\n              <div className={Style.detail} key={index}>\n                <span className={Style.label} title={detail.label}>\n                  {detail.label}\n                </span>\n                {!isNil(detail.value) && (\n                  <span className={Style.value}>\n                    {detail.value}{\" \"}\n                    <span className={Style.appendix}>\n                      {!isNil(detail.value) && detail.appendix\n                        ? ` ${detail.appendix}`\n                        : \"\"}\n                    </span>\n                  </span>\n                )}\n                {detail.valueLoader && (\n                  <span className={Style.valueLoader}>\n                    {detail.valueLoader}\n                  </span>\n                )}\n              </div>\n            );\n          })}\n      </div>\n      <label className={Style.Label}>{label}</label>\n    </div>\n  ) : (\n    <a\n      href={link || \"#\"}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      onClick={onClick}\n      className={Style.Container}\n    >\n      <div\n        className={`${Style.Icon} ${isSingle ? Style.Single : Style.Double}`}\n      >\n        <CustomIcon />\n      </div>\n      <label className={Style.Label}>{label}</label>\n    </a>\n  );\n}\n\nexport default Icon;\n","import { debounce, first, get as lGet, isNil, last, set } from \"lodash\";\nimport moment from \"moment\";\nimport { parse } from \"node-html-parser\";\n\nexport const isLocalhost = () => window.location.hostname === \"localhost\";\n\nexport const getPageUrl = (page, credentials, path = \"\") => {\n  const authPath =\n    credentials?.username && credentials?.key\n      ? `/auth/${credentials?.username}/${credentials?.key}`\n      : \"\";\n  return `${authPath}/${page}${path ? \"/\" : \"\"}${path ?? \"\"}`;\n};\n\nexport const getPagePath = (page, credentials, path = \"\") => {\n  const authPath =\n    credentials?.username && credentials?.key\n      ? `/auth/${credentials?.username}/${credentials?.key}`\n      : \"\";\n  const normalPath = `/${page}${path ? \"/\" : \"\"}${path ?? \"\"}`;\n  return authPath ? [`${authPath}${normalPath}`, normalPath] : [normalPath];\n};\n\nconst mappedCallbacks = {\n  \"@html\": (_, found) => (found?.keyLast ? \".\" : \"\") + \"@html\",\n  \"@json\": (_, found) => (found?.keyLast ? \".\" : \"\") + \"@json\",\n  \"@record\": (_, found) => (found?.keyLast ? \".\" : \"\") + \"@record\",\n  \"@last\": (obj, found) => {\n    return (found?.keyLast ? \".\" : \"\") + last(Object.keys(obj));\n  },\n  \"@first\": (obj, found) => {\n    return (found?.keyLast ? \".\" : \"\") + first(Object.keys(obj));\n  },\n};\nconst mappedKeys = Object.keys(mappedCallbacks);\n\nexport const logger = {\n  ...(console ?? {}),\n  show: (title, content, operation = \"log\") => {\n    operation = typeof console[operation] === \"function\" ? operation : \"log\";\n    console[operation]?.(\"\");\n    title &&\n      console[operation]?.(`%c ----- ${title} ----- start`, \"color: green;\");\n    console[operation]?.({ content });\n    title && console[operation]?.(`%c ----- ${title} ----- end`, \"color: red;\");\n  },\n};\n\nexport const get = (object, key) => {\n  const check = { object: JSON.parse(JSON.stringify(object)) };\n  let replacedKey = key;\n  mappedKeys.forEach((mappedKey) => {\n    const mappedRegex = new RegExp(\n      `(?<rule>(^(?<keyFirst>${mappedKey})|.(?<keyLast>${mappedKey}))(\\\\((?<params>[^\\\\)]+)\\\\))?)`,\n      \"m\"\n    );\n    const foundKey = replacedKey.match(mappedRegex)?.groups;\n\n    if (foundKey?.rule) {\n      const mainKey = replacedKey.split(foundKey?.rule)?.[0];\n      let mainObj = mainKey ? lGet(check.object, mainKey) : check.object;\n\n      if (mainObj && [\"@html\", \"@json\", \"@record\"].includes(mappedKey)) {\n        let content;\n        if (\n          typeof mainObj === \"string\" &&\n          mappedKey === \"@html\" &&\n          foundKey?.params\n        ) {\n          const html = parse(mainObj);\n          content = {\n            [mappedKey]: html?.querySelector(foundKey?.params)?.innerHTML,\n          };\n        } else if (typeof mainObj === \"string\" && mappedKey === \"@json\") {\n          try {\n            content = { [mappedKey]: JSON.parse(mainObj) };\n          } catch (err) {\n            content = undefined;\n          }\n        } else if (Array.isArray(mainObj) && mappedKey === \"@record\") {\n          content = {\n            [mappedKey]: mainObj.reduce((acc, loopObj) => {\n              const [key, value, add, operation] =\n                foundKey?.params?.split(/\\s*,\\s*/);\n              const newKey = lGet(loopObj, key);\n\n              if (isNil(newKey)) {\n                return acc;\n              }\n\n              const newObj = {\n                [newKey]: lGet(loopObj, value),\n              };\n\n              const newAdd = parseFloat(lGet(loopObj, add));\n              const newValue = parseFloat(newObj[newKey]);\n              if (\n                !isNaN(newAdd) &&\n                !isNaN(newValue) &&\n                [\"+\", \"-\", \"/\", \"*\"].includes(operation)\n              ) {\n                switch (operation) {\n                  case \"+\":\n                    newObj[newKey] = newValue + newAdd;\n                    break;\n                  case \"-\":\n                    newObj[newKey] = newValue - newAdd;\n                    break;\n                  case \"/\":\n                    newObj[newKey] = newValue / newAdd;\n                    break;\n                  case \"*\":\n                    newObj[newKey] = newValue * newAdd;\n                    break;\n                  default:\n                    break;\n                }\n              }\n\n              return { ...acc, ...newObj };\n            }, {}),\n          };\n        }\n\n        if (!mainKey) {\n          check.object = content;\n        } else {\n          set(check.object, mainKey, content);\n        }\n\n        replacedKey = replacedKey.replace(\n          mappedRegex,\n          `${mappedCallbacks[mappedKey](mainObj, foundKey)}`\n        );\n      } else if (mainObj && typeof mainObj === \"object\") {\n        replacedKey = replacedKey.replace(\n          mappedRegex,\n          `${mappedCallbacks[mappedKey](mainObj, foundKey)}`\n        );\n      }\n    }\n  });\n\n  return lGet(check.object, replacedKey);\n};\n\nexport const getWithHtml = (object, key) => {\n  const parts = key.split(\"@html.\", 2);\n\n  const currentObject = !parts[0] ? object : get(object, parts[0]);\n  const html = parse(currentObject);\n\n  // @html.span.main-price\n  // megcsinalni, hogy megadhassunk script taget, amit parseol jsonkent\n  // kiiratni teljes tombot gridkent, hogy az osszes sorat kiirathassuk ez is egy template fajta\n  // html parsert bevinni cronba is\n  // a cronnal lekezelni a dollarjelet a szambol\n\n  return html?.querySelector(parts[1])?.childNodes?.[0].rawText;\n};\n\nwindow.moment = moment;\n\nconst momentFormatter = (value, [format]) => {\n  if (!moment(value).isValid()) {\n    return { value: \"No\" };\n  }\n\n  if (value > \"2500-01-01 00:00:00\") {\n    return { value: \"Yes\" };\n  }\n\n  return { value: moment(value).format(format) };\n};\n\nconst currencyFormatter = (value, [currency], isChart = false) => {\n  const chartOptions = {\n    maximumFractionDigits: 0,\n  };\n  return {\n    value: new Intl.NumberFormat(\"hu-HU\", {\n      currency,\n      style: \"currency\",\n      ...(isChart ? chartOptions : {}),\n    }).format(value),\n  };\n};\n\nconst percentFormatter = (value) => {\n  return {\n    value: new Intl.NumberFormat(\"hu-HU\", {\n      style: \"percent\",\n    }).format(value / 100),\n  };\n};\n\nconst abbreviationFormatter = (givenValue = 0, suffixes) =>\n  abbreviation(givenValue, 1, suffixes);\n\nconst abbreviation = (\n  givenValue = 0,\n  precision = 1,\n  suffixes = [\"\", \"K\", \"M\"]\n) => {\n  if (!isFinite(givenValue)) {\n    return { value: givenValue };\n  }\n\n  const value = parseFloat(givenValue);\n  const flooredValue = Math.floor(value) || 0;\n  const suffixNum = Math.floor(\n    (`${flooredValue}`.length - (flooredValue < 0 ? 2 : 1)) / 3\n  );\n  let shortValue =\n    suffixNum !== 0\n      ? parseFloat((value / Math.pow(1000, suffixNum)).toPrecision(3))\n      : value;\n  if (shortValue % 1 !== 0) {\n    shortValue = shortValue.toFixed(\n      shortValue < 10 ? precision + 1 : precision\n    );\n  }\n  const suffix =\n    (typeof suffixes === \"string\"\n      ? suffixes\n      : suffixes?.[suffixNum] ?? suffixes?.[0]) ?? \"\";\n  return { sourceValue: givenValue, value: shortValue, appendix: suffix };\n};\n\nexport const formatters = {\n  abbreviation: abbreviationFormatter,\n  moment: momentFormatter,\n  currency: currencyFormatter,\n  percent: percentFormatter,\n};\n\nexport const isTrue = (value) => value && value !== \"0\" && value !== \"false\";\n\nexport const shortHexToLongHex = (value) => {\n  if (value?.match(/^#[0-9a-fA-F]{3}$/)) {\n    return value.replace(/[0-9a-fA-F]{1}/g, (m) => m + m);\n  }\n\n  return value;\n};\n\nlet isMobileWidthValue = window.innerWidth <= 1000;\nlet resizeSet = false;\nexport const isMobileWidth = () => {\n  if (!resizeSet) {\n    window.addEventListener(\n      \"resize\",\n      debounce(() => {\n        isMobileWidthValue = window.innerWidth <= 1000;\n      }, 100)\n    );\n\n    resizeSet = true;\n  }\n\n  return isMobileWidthValue;\n};\n\nexport const roundToNextDecimal = (valueProp) => {\n  const value = parseFloat(valueProp);\n  if (isNaN(value)) {\n    return;\n  }\n  return (\n    Math.ceil(value / Math.pow(10, `${Math.ceil(value / 10)}`.length)) *\n    Math.pow(10, `${Math.ceil(value / 10)}`.length)\n  );\n};\n\nexport const findKey = (object, findKey) => {\n  return Object.keys(object).find((key) => new RegExp(`^${findKey}`).test(key));\n};\n\nexport const getColorForPercentage = (perc) => {\n  let r,\n    g,\n    b = 0;\n  if (perc < 50) {\n    r = 255;\n    g = Math.round(5.1 * perc);\n  } else {\n    g = 255;\n    r = Math.round(510 - 5.1 * perc);\n  }\n  const h = r * 0x10000 + g * 0x100 + b * 0x1;\n  return \"#\" + (\"000000\" + h.toString(16)).slice(-6);\n};\n\nexport const getDistance = (origin, destination) => {\n  // return distance in meters\n  const lon1 = toRadian(origin[1]);\n  const lat1 = toRadian(origin[0]);\n  const lon2 = toRadian(destination[1]);\n  const lat2 = toRadian(destination[0]);\n\n  const deltaLat = lat2 - lat1;\n  const deltaLon = lon2 - lon1;\n\n  const a =\n    Math.pow(Math.sin(deltaLat / 2), 2) +\n    Math.cos(lat1) * Math.cos(lat2) * Math.pow(Math.sin(deltaLon / 2), 2);\n  const c = 2 * Math.asin(Math.sqrt(a));\n  const EARTH_RADIUS = 6371;\n  return c * EARTH_RADIUS * 1000;\n};\n\nconst toRadian = (degree) => {\n  return (degree * Math.PI) / 180;\n};\n\nexport const isDatumEnableInChart = (datum) => {\n  return (\n    !isNaN(parseFloat(datum.value)) &&\n    datum.formatter !== \"map\" &&\n    isTrue(datum.today)\n  );\n};\n\nexport const getChartData = (data) => {\n  return (data ?? []).filter((datum) => isDatumEnableInChart(datum));\n};\n","import { Player } from \"@lottiefiles/react-lottie-player\";\nimport { getColors, replaceColor } from \"lottie-colorify\";\nimport * as Icons from \"./LottieIcons\";\nimport toHex from \"colornames\";\nimport { shortHexToLongHex } from \"../utils\";\n\nfunction LottieIcon({ name, colors, ...props }) {\n  if (colors && !Array.isArray(colors)) {\n    colors = [colors];\n  }\n\n  if (!Icons[name]) {\n    console.warn(`Missing icon: ${name}`);\n    return null;\n  }\n\n  let Icon = Icons[name];\n  if (colors) {\n    const lottieColors = getColors(Icons[name]);\n    Icon = colors.reduce(\n      (acc, curr, index) =>\n        replaceColor(\n          lottieColors[index],\n          toHex(curr) ?? shortHexToLongHex(curr),\n          acc\n        ),\n      Icons[name]\n    );\n  }\n\n  return (\n    <Player\n      autoplay\n      src={Icon}\n      speed=\"1\"\n      {...props}\n      style={{\n        ...(props.style ?? {}),\n      }}\n    />\n  );\n}\n\nexport const getSrc = (name) => Icons[name];\n\nexport default LottieIcon;\n","import PropTypes from \"prop-types\";\nimport Style from \"./Loader.module.scss\";\nimport LottieIcon, { getSrc } from \"./LottieIcon\";\n\nexport function Loader({\n  label,\n  hidden = false,\n  className = \"\",\n  iconClassName = \"\",\n  ...props\n}) {\n  return hidden ? null : (\n    <div className={`${Style.loader} ${className}`} {...props}>\n      <span className={Style.title}>{label}</span>\n      <LottieIcon {...props} name=\"Loading\" loop />\n    </div>\n  );\n}\n\nLoader.propTypes = {\n  label: PropTypes.string,\n  hidden: PropTypes.bool,\n  className: PropTypes.string,\n  iconClassName: PropTypes.string,\n};\n\nexport const LoaderJSON = getSrc(\"Loading\");\n\nexport default Loader;\n","import { useEffect, useState } from \"react\";\nimport Style from \"../App.module.scss\";\nimport Icon from \"./Icon\";\nimport Loader from \"./Loader\";\n\nfunction Apps({ apps, isLoggedIn }) {\n  const [isLoading, setIsLoading] = useState(!apps);\n  useEffect(() => {\n    setIsLoading(!apps);\n  }, [apps]);\n\n  if (!isLoggedIn) {\n    return <Loader />;\n  }\n\n  return (\n    <div className={Style.Apps}>\n      {isLoading ? (\n        <Icon\n          label=\"Loading\"\n          icon={() => <Loader iconStyle={{ fontSize: \"1em\" }} />}\n          foreground=\"white\"\n          background=\"transparent\"\n          noClick\n        />\n      ) : (\n        apps.map((app, index) => (\n          <Icon\n            style={{ width: \"1em\", height: \"1em\" }}\n            key={index}\n            label={app.label}\n            link={app.link}\n            app={app.app}\n            icon={app.icon}\n          />\n        ))\n      )}\n    </div>\n  );\n}\n\nexport default Apps;\n","const SITE_URL = \"ioniq.demo.hu/\";\n\nexport const getSiteUrl = () => {\n  return `${window.location.protocol}//${SITE_URL}`;\n};\n\nexport const DISABLE_AUTHORIZATION = true;\n\nexport const ENABLED_PAGES = {\n  apps: \"apps\",\n  actions: \"actions\",\n  backups: \"backups\",\n};\nexport const FETCH_INTERVAL = 60000;\n","import { isNil } from \"lodash\";\nimport { useCallback } from \"react\";\nimport { useState } from \"react\";\nimport { findKey, formatters, get, isTrue } from \"../utils\";\n\nconst getResponseBody = (subjects, key) => {\n  let usedSubject = subjects?.[subjects?.length - 1]?.body ?? null;\n  let usedKey = key;\n\n  if (usedKey.indexOf(\"@responses.\") === 0) {\n    usedKey = usedKey.replace(\"@responses.\", \"\");\n    usedSubject = subjects;\n  }\n\n  return get(usedSubject, usedKey);\n};\n\nexport const parseTemplatesUtil = (\n  subjects,\n  possibleTemplates = [],\n  isOnDemand = false\n) => {\n  if (!subjects?.length && !isOnDemand) {\n    return [];\n  }\n\n  const newTemplatesCache = {};\n  const newTemplates = [];\n  const lastSubject = subjects?.[subjects?.length - 1] ?? null;\n\n  if (\n    ((lastSubject?.body?.status !== 200 &&\n      lastSubject?.headers?.status !== 200) ||\n      lastSubject?.main?.status !== 200) &&\n    !isOnDemand\n  ) {\n    newTemplatesCache[0] = {\n      label: `Error ${\n        lastSubject?.main?.status\n          ? lastSubject?.main?.status\n          : lastSubject?.body?.status ?? lastSubject?.headers?.status ?? \"\"\n      }:`,\n      value: lastSubject?.main?.statusText\n        ? lastSubject?.main?.statusText\n        : lastSubject?.body?.statusText ??\n          lastSubject?.headers?.statusText ??\n          \"Unknown\",\n    };\n    newTemplates.push(newTemplatesCache[0]);\n  }\n\n  const parents = possibleTemplates.filter(\n    (possibleTemplate) =>\n      isNil(possibleTemplate.parent_id) || possibleTemplate.parent_id === \"\"\n  );\n  const children = possibleTemplates.filter(\n    (possibleTemplate) =>\n      !isNil(possibleTemplate.parent_id) && possibleTemplate.parent_id !== \"\"\n  );\n  [...parents, ...children].forEach((possibleTemplate) => {\n    let validValue = getResponseBody(subjects, possibleTemplate.key);\n    let validLabel = possibleTemplate.label;\n\n    const dependsOn = possibleTemplate.valueDependsOn\n      ? getResponseBody(subjects, possibleTemplate.valueDependsOn)\n      : undefined;\n\n    const formatter = possibleTemplate.formatter;\n    const formatterParams = possibleTemplate.formatterParams\n      ? possibleTemplate.formatterParams.split(\",\")\n      : [];\n\n    if (\n      isTrue(validValue) &&\n      (!possibleTemplate.valueDependsOn ||\n        (possibleTemplate.valueDependsOn && isTrue(dependsOn)))\n    ) {\n      validValue = possibleTemplate.valueIf ?? validValue;\n    } else {\n      validLabel = possibleTemplate.labelElse ?? possibleTemplate.label;\n      validValue = possibleTemplate.valueElse ?? validValue;\n    }\n\n    if (!isNil(validValue)) {\n      const arrayValues =\n        typeof validValue === \"object\"\n          ? validValue\n          : { [validLabel]: validValue };\n      Object.entries(arrayValues).forEach(([templateKey, templateValue]) => {\n        const formattedValue = formatters[formatter]\n          ? formatters[formatter](templateValue, formatterParams)\n          : {\n              value: templateValue,\n              appendix: possibleTemplate.formatterParams,\n            };\n\n        const keyLabel = validLabel.match(/@key(\\((?<label>[^)]+)\\))?/m);\n        const key = keyLabel ? templateKey : validLabel;\n        const label = keyLabel\n          ? keyLabel?.groups?.label ?? templateKey\n          : validLabel;\n        const id = `${possibleTemplate.id}_${key}`;\n        newTemplatesCache[id] = {\n          formatter,\n          label,\n          id,\n          templateId: possibleTemplate.id,\n          hidden: isTrue(possibleTemplate.hidden),\n          hiddenElse: isTrue(possibleTemplate.hiddenElse),\n          ...formattedValue,\n          children: [],\n        };\n\n        if (newTemplatesCache[id] && possibleTemplate.id) {\n          const parent_id =\n            findKey(\n              newTemplatesCache,\n              `${possibleTemplate.parent_id}_${key}`\n            ) ?? findKey(newTemplatesCache, possibleTemplate.parent_id);\n          if (parent_id && newTemplatesCache[parent_id]) {\n            newTemplatesCache[parent_id].children.push(newTemplatesCache[id]);\n          } else {\n            newTemplates.push(newTemplatesCache[id]);\n          }\n        } else {\n          newTemplates.push({ ...newTemplatesCache[id] });\n        }\n      });\n    } else if (isOnDemand) {\n      newTemplatesCache[possibleTemplate.id] = {\n        label: validLabel,\n        id: possibleTemplate.id,\n        templateId: possibleTemplate.id,\n        hidden: isTrue(possibleTemplate.hidden),\n        hiddenElse: isTrue(possibleTemplate.hiddenElse),\n        value: isTrue(possibleTemplate.hiddenElse) ? undefined : \"-\",\n        children: [],\n      };\n      if (newTemplatesCache[possibleTemplate.id]) {\n        if (\n          possibleTemplate.parent_id &&\n          newTemplatesCache[possibleTemplate.parent_id]\n        ) {\n          newTemplatesCache[possibleTemplate.parent_id].children.push(\n            newTemplatesCache[possibleTemplate.id]\n          );\n        } else {\n          newTemplates.push(newTemplatesCache[possibleTemplate.id]);\n        }\n      }\n    }\n  });\n\n  const reducedTemplates = reduceTemplates(newTemplates);\n\n  return reducedTemplates;\n};\n\nconst reduceTemplates = (templates, level = 0) => {\n  return templates.map((curr) => {\n    return {\n      ...curr,\n      isChild: level > 0,\n      level,\n      children:\n        curr?.children?.length > 0\n          ? reduceTemplates(curr?.children, level + 1)\n          : [],\n    };\n  }, []);\n};\n\nconst useTemplates = () => {\n  const [templates, setTemplates] = useState([]);\n  const parseTemplates = useCallback((subjects, possibleTemplates = []) => {\n    setTemplates(parseTemplatesUtil(subjects, possibleTemplates));\n  }, []);\n\n  return { templates, parseTemplates };\n};\n\nexport default useTemplates;\n","import { debounce, isNil, max } from \"lodash\";\nimport moment from \"moment\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport {\n  Area,\n  CartesianGrid,\n  ComposedChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from \"recharts\";\nimport { formatters, roundToNextDecimal } from \"../utils\";\nimport toHex from \"colornames\";\n\nimport Style from \"./ActionChart.module.scss\";\n\nexport const chartColors = [\n  \"#338066\",\n  \"#80334f\",\n  \"#334080\",\n  \"#7e8033\",\n  \"#753380\",\n];\n\nconst getFormattedValue = (value, setting, isChart) => {\n  return formatters[setting?.formatter]\n    ? formatters[setting?.formatter](value, setting?.formatterParams, isChart)\n    : { value, appendix: setting?.formatterParams };\n};\n\nfunction ActionChart({\n  data: rawData,\n  dataMax: rawDataMax,\n  dataMin: rawDataMin,\n  color: colorProp,\n  templates,\n  isIcon = false,\n}) {\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 1000);\n\n  const templateObject = useMemo(\n    () =>\n      templates?.reduce(\n        (curr, acc) => ({\n          ...curr,\n          [acc.id]: { ...acc },\n        }),\n        {}\n      ) ?? {},\n    [templates]\n  );\n  const settings = useMemo(() => ({}), []);\n\n  const validColor = useMemo(() => {\n    if (typeof colorProp === \"object\") {\n      return colorProp;\n    }\n\n    const matchedColor =\n      colorProp?.match(\n        /#[A-Fa-f0-9]+|rgba?\\(\\d+\\s*,?\\s*\\d+\\s*,?\\s*\\d+\\s*\\)/\n      )?.[0] ??\n      colorProp ??\n      null;\n    return toHex(matchedColor) ?? matchedColor;\n  }, [colorProp]);\n\n  useEffect(() => {\n    const setIsMobileDebounced = debounce(\n      () => setIsMobile(window.innerWidth < 1000),\n      100,\n      { trailing: true }\n    );\n    window.addEventListener(\"resize\", setIsMobileDebounced);\n\n    return () => {\n      window.removeEventListener(\"resize\", setIsMobileDebounced);\n    };\n  }, []);\n\n  const getColor = useCallback(\n    (index) => {\n      return (\n        (typeof validColor === \"object\"\n          ? validColor[index % chartColors.length]\n          : validColor) ??\n        chartColors?.[index % chartColors.length] ??\n        chartColors?.[0] ??\n        \"#338066\"\n      );\n    },\n    [validColor]\n  );\n\n  const minMax = useMemo(() => {\n    const returnValue = {};\n    Object.values(rawDataMax).forEach((datum) => {\n      if (!returnValue[datum.template_id]) {\n        returnValue[datum.template_id] = {};\n      }\n\n      returnValue[datum.template_id].max = parseFloat(datum.value, 10);\n    });\n    Object.values(rawDataMin).forEach((datum) => {\n      if (!returnValue[datum.template_id]) {\n        returnValue[datum.template_id] = {};\n      }\n\n      returnValue[datum.template_id].min = parseFloat(datum.value, 10);\n    });\n    return returnValue;\n  }, [rawDataMax, rawDataMin]);\n\n  const getMinMax = useCallback(\n    (templateId, index) => {\n      if (\n        !minMax[templateId] ||\n        minMax[templateId]?.min === undefined ||\n        minMax[templateId]?.max === undefined\n      ) {\n        return {};\n      }\n\n      const { min, max } = minMax[templateId];\n      const onePercent = (max - min) / 100;\n\n      return {\n        domain: [min, max + onePercent * (5 + index * 10)],\n      };\n    },\n    [minMax]\n  );\n\n  const data = useMemo(\n    () =>\n      Object.values(\n        rawData.reduce((acc, curr) => {\n          if (!settings[curr.template_id]) {\n            settings[curr.template_id] = {\n              color: getColor(Object.keys(settings).length),\n              formatter: curr?.formatter,\n              formatterParams: curr?.formatterParams\n                ? curr?.formatterParams.split(\",\")\n                : [],\n            };\n          }\n\n          return {\n            ...acc,\n            [curr.time]: {\n              ...(acc[curr.time] ?? {}),\n              ...curr,\n              [curr.template_id]: parseFloat(curr.value, 10),\n            },\n          };\n        }, {})\n      ),\n    [getColor, rawData, settings]\n  );\n\n  // const maxValues = useMemo(\n  //   () =>\n  //     data.reduce((acc, curr) => {\n  //       const newValues = acc;\n  //       Object.keys(settings).forEach((key) => {\n  //         acc[key] = max([acc[key] ?? 0, parseFloat(curr[key] ?? 0)]);\n  //       });\n\n  //       return newValues;\n  //     }, {}),\n  //   [data, settings]\n  // );\n  const maxValue = useMemo(() => {\n    let newValue;\n    data.forEach((curr) => {\n      Object.keys(settings).forEach((key) => {\n        newValue = !newValue\n          ? curr[key]\n          : max([newValue ?? 0, parseFloat(curr[key] ?? 0)]);\n      });\n    });\n\n    return newValue;\n  }, [data, settings]);\n\n  return (\n    <ResponsiveContainer width=\"100%\" height=\"100%\">\n      <ComposedChart\n        data={data}\n        margin={{\n          top: 0,\n          right: 0,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        {!isIcon && (\n          <XAxis\n            dataKey=\"time\"\n            fontSize={12}\n            tickFormatter={(value) => {\n              return moment(value).format(\"HH:mm\");\n            }}\n          />\n        )}\n        {!isIcon &&\n          !isMobile &&\n          false &&\n          Object.entries(settings).map(([valueId, setting], index) => {\n            const maxFormattedValue = getFormattedValue(\n              roundToNextDecimal(maxValue),\n              setting,\n              true\n            );\n            const maxWidth =\n              (`${maxFormattedValue?.value ?? \"\"} ${\n                maxFormattedValue?.appendix ?? \"\"\n              }`.length ?? 3) * 20;\n\n            return (\n              <YAxis\n                {...getMinMax(valueId, index)}\n                key={valueId}\n                yAxisId={valueId}\n                orientation={index % 2 === 0 ? \"left\" : \"right\"}\n                fontSize={12}\n                width={maxWidth}\n                tickFormatter={(value) => {\n                  const formattedValue = getFormattedValue(\n                    value,\n                    setting,\n                    true\n                  );\n\n                  return !isNil(formattedValue.value)\n                    ? `${formattedValue.value} ${formattedValue.appendix ?? \"\"}`\n                    : \"\";\n                }}\n              />\n            );\n          })}\n        {!isIcon && (\n          <Tooltip\n            content={({ payload: items, label }) => {\n              return (\n                <div className={Style.Tooltip}>\n                  <div className={Style.Label}>\n                    {moment(label).format(\"HH:mm\")}\n                  </div>\n                  <ul className={Style.Items}>\n                    {items.map(({ value, name, color }) => {\n                      const formattedValue = formatters[\n                        settings?.[name].formatter\n                      ]\n                        ? formatters[settings?.[name].formatter](\n                            value,\n                            settings?.[name].formatterParams\n                          )\n                        : { value, appendix: settings?.[name].formatterParams };\n                      return (\n                        <li className={Style.Item} style={{ color }}>\n                          <span className={Style.Name}>\n                            {templateObject?.[name].label}\n                          </span>\n                          <span className={Style.Value}>\n                            {formattedValue.value}\n                          </span>\n                          <span className={Style.Appendix}>\n                            {formattedValue.appendix ?? \"\"}\n                          </span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                </div>\n              );\n            }}\n          />\n        )}\n        {Object.entries(settings).map(([valueId, setting], index) => (\n          <Area\n            key={valueId}\n            type=\"monotone\"\n            yAxisId={valueId}\n            dataKey={valueId}\n            stroke={setting.color}\n            strokeWidth={isIcon ? 1 : 2}\n            fill={setting.color}\n            fillOpacity={0.35}\n          />\n        ))}\n      </ComposedChart>\n    </ResponsiveContainer>\n  );\n}\n\nexport default ActionChart;\n","import Style from \"../App.module.scss\";\nimport Icon from \"./Icon\";\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\nimport { useState, useEffect, useRef, useCallback, createRef } from \"react\";\nimport { getChartData, getPageUrl } from \"../utils\";\nimport { ENABLED_PAGES, FETCH_INTERVAL, getSiteUrl } from \"../config\";\nimport { debounce, isEmpty } from \"lodash\";\nimport ls from \"local-storage\";\nimport { parseTemplatesUtil } from \"../hooks/use-templates\";\nimport Loader from \"./Loader\";\nimport ActionChart from \"./ActionChart\";\n\nfunction Actions({ runners, credentials, isLoggedIn, token }) {\n  const groupsRef = useRef({});\n  const browserHistory = useHistory();\n  const onDemandFetchings = useRef({});\n  const onDemandsRef = useRef({});\n  const [onDemands, setOnDemands] = useState(\n    ls(\"lastFetched\") && ls(\"onDemands\") ? ls(\"onDemands\") : {}\n  );\n  const [lastFetched, setLastFetched] = useState(ls(\"lastFetched\") ?? null);\n  const [isLoading, setIsLoading] = useState(!runners);\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const resize = useCallback(\n    debounce(\n      () => {\n        const currentWindowWidth = window.innerWidth;\n        setWindowWidth(currentWindowWidth);\n        Object.values(groupsRef.current).forEach((groupRef) => {\n          if (!groupRef?.current?.style) {\n            return;\n          }\n\n          groupRef.current.style.width = null;\n          if (currentWindowWidth >= 1000) {\n            groupRef.current.style.width = `${groupRef.current.scrollWidth}px`;\n          }\n        });\n      },\n      50,\n      { trailing: true }\n    ),\n    []\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", resize);\n\n    setTimeout(() => resize(), 0);\n    setTimeout(() => resize(), 200);\n    setTimeout(() => resize(), 500);\n\n    return () => window.removeEventListener(\"resize\", resize);\n  }, [resize]);\n\n  const fetchOnDemands = useCallback(\n    (runners) => {\n      runners.forEach((runner, index) => {\n        if (!runner.onDemand) {\n          return;\n        }\n\n        if (\n          !onDemandFetchings.current[runner.onDemand.runner_key] &&\n          !onDemandsRef.current[runner.onDemand.runner_key] &&\n          (!lastFetched || parseInt(lastFetched) < Date.now() - FETCH_INTERVAL)\n        ) {\n          const last = Date.now();\n          ls(\"lastFetched\", last);\n          setLastFetched(last);\n          onDemandFetchings.current[runner.onDemand.runner_key] = new Promise(\n            (resolve, reject) => {\n              setTimeout(() => {\n                fetch(\n                  `${getSiteUrl()}api/onDemand/${runner.key}/${\n                    runner.onDemand.runner_key\n                  }`,\n                  {\n                    method: \"POST\",\n                    headers: {\n                      Authorization: `Bearer ${token}`,\n                    },\n                  }\n                )\n                  .then((resp) => resp.json())\n                  .then((data) => {\n                    if (data.status !== 200 || !data.responses) {\n                      reject();\n                    } else {\n                      resolve(\n                        Object.values(data.responses).map((response) => ({\n                          ...response,\n                          main: {\n                            status: data.status,\n                            statusText: data.statusText,\n                          },\n                        }))\n                      );\n                    }\n                  })\n                  .catch((e) => {\n                    // console.err(e);\n                    reject();\n                  });\n              }, index * 500 + parseInt(runner.onDemand.delay));\n            }\n          )\n            .then((data) => {\n              onDemandsRef.current = {\n                ...onDemandsRef.current,\n                [runner.onDemand.runner_key]: data,\n              };\n              ls(\"onDemands\", onDemandsRef.current);\n              setOnDemands(onDemandsRef.current);\n            })\n            .catch(() => {\n              onDemandsRef.current = {\n                ...onDemandsRef.current,\n                [runner.onDemand.runner_key]: null,\n              };\n              ls(\"onDemands\", onDemandsRef.current);\n              setOnDemands(onDemandsRef.current);\n            });\n        }\n      });\n    },\n    [lastFetched, token]\n  );\n\n  const getOnDemand = useCallback(\n    (runnerKey, onDemandRunner, color) => {\n      if (!onDemandRunner) {\n        return null;\n      }\n\n      let value = null;\n      if (\n        onDemands[runnerKey] !== undefined &&\n        parseInt(lastFetched) > Date.now() - FETCH_INTERVAL\n      ) {\n        const templates = parseTemplatesUtil(\n          onDemands[runnerKey],\n          [onDemandRunner],\n          true\n        );\n\n        value = templates[0];\n      }\n\n      return (\n        value ?? {\n          label: onDemandRunner.label,\n          valueLoader: <Loader colors={color} />,\n        }\n      );\n    },\n    [lastFetched, onDemands]\n  );\n\n  const getGroups = useCallback(\n    (groupedRunners) => {\n      const groups = {};\n      groupedRunners.forEach((runner, index) => {\n        const groupId = runner.group\n          ? `g${runner.group}`\n          : windowWidth >= 1000\n          ? 0\n          : `i${runner.order}`;\n        if (!groups[groupId]) {\n          groups[groupId] = {\n            name: runner.groupName ?? \"\\u00A0\",\n            id: runner.group,\n            children: [],\n          };\n        }\n\n        const chartData = getChartData(runner.data);\n\n        groups[groupId].children.push(\n          <Link\n            onClick={(e) => {\n              if (runner.single !== \"1\") {\n                e.preventDefault();\n              }\n            }}\n            onDoubleClick={(e) => {\n              if (runner.single !== \"0\") {\n                e.preventDefault();\n              } else {\n                browserHistory.push(\n                  getPageUrl(ENABLED_PAGES.actions, credentials, runner.key)\n                );\n              }\n            }}\n            to={getPageUrl(ENABLED_PAGES.actions, credentials, runner.key)}\n            key={runner.key}\n            className={Style.added}\n            style={{ transitionDelay: (index + 1) * 200 }}\n          >\n            {chartData?.length ? (\n              <div\n                className={Style.IconChart}\n                style={{ background: runner.background }}\n              >\n                <ActionChart\n                  data={chartData}\n                  dataMax={runner.dataMax}\n                  dataMin={runner.dataMin}\n                  color={runner.foreground}\n                  isIcon\n                />\n              </div>\n            ) : null}\n            <Icon\n              style={{ width: \"1em\", height: \"1em\" }}\n              label={runner.name}\n              icon={runner.icon}\n              foreground={runner.foreground}\n              background={runner.background}\n              noClick\n              isSingle={runner.single === \"1\"}\n              details={runner.onDemand?.templates?.map((template) =>\n                getOnDemand(\n                  runner.onDemand?.runner_key,\n                  template,\n                  runner.foreground\n                )\n              )}\n            />\n          </Link>\n        );\n      });\n\n      return groups;\n    },\n    [browserHistory, credentials, getOnDemand, windowWidth]\n  );\n\n  useEffect(() => {\n    setIsLoading(!runners);\n\n    if (runners && token && isEmpty(onDemandFetchings.current)) {\n      fetchOnDemands(runners);\n    }\n  }, [fetchOnDemands, runners, token]);\n\n  if (runners?.length === 1) {\n    return (\n      <Redirect\n        to={getPageUrl(ENABLED_PAGES.actions, credentials, runners[0].key)}\n      />\n    );\n  }\n\n  if (!isLoggedIn) {\n    return <Loader />;\n  }\n\n  return (\n    <div className={Style.Apps}>\n      {runners?.length > 1 ? (\n        <Link to={getPageUrl(ENABLED_PAGES.apps, credentials)}>\n          <Icon\n            label=\"Home apps\"\n            icon=\"GiHouse\"\n            foreground=\"white\"\n            background=\"linear-gradient(147deg, rgba(249,15,216,1) 0%, rgba(245,67,119,1) 26%, rgba(252,28,28,1) 50%, rgba(255,195,13,1) 75%, rgba(114,251,89,1) 100%)\"\n            noClick\n          />\n        </Link>\n      ) : null}\n      {isLoading ? (\n        <Icon\n          label=\"Loading\"\n          icon={() => <Loader iconStyle={{ fontSize: \"1em\" }} />}\n          foreground=\"white\"\n          background=\"transparent\"\n          noClick\n        />\n      ) : (\n        Object.entries(getGroups(runners)).map((entry) => {\n          groupsRef.current[entry[0]] = createRef();\n\n          return (\n            <div\n              ref={groupsRef.current[entry[0]]}\n              className={Style.Group}\n              groupid={entry[1].id > 0 ? entry[1].id : null}\n              key={entry[0]}\n            >\n              {entry[1].name && (\n                <div className={Style.GroupName}>{entry[1].name}</div>\n              )}\n              <div className={Style.GroupItems}>{entry[1].children}</div>\n            </div>\n          );\n        })\n      )}\n    </div>\n  );\n}\n\nexport default Actions;\n","import Style from \"../App.module.scss\";\nimport Icon from \"./Icon\";\nimport { useState, useEffect, useRef, useCallback, createRef } from \"react\";\nimport { debounce } from \"lodash\";\nimport Loader from \"./Loader\";\nimport { getSiteUrl } from \"../config\";\n\nfunction Backups({ backups, isLoggedIn, token }) {\n  const groupsRef = useRef({});\n  const [isLoading, setIsLoading] = useState(!backups);\n\n  useEffect(() => {\n    setIsLoading(!backups);\n  }, [backups]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const resize = useCallback(\n    debounce(\n      () => {\n        const currentWindowWidth = window.innerWidth;\n        Object.values(groupsRef.current).forEach((groupRef) => {\n          if (!groupRef?.current?.style) {\n            return;\n          }\n\n          groupRef.current.style.width = null;\n          if (currentWindowWidth >= 1000) {\n            groupRef.current.style.width = `${groupRef.current.scrollWidth}px`;\n          }\n        });\n      },\n      50,\n      { trailing: true }\n    ),\n    []\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", resize);\n\n    setTimeout(() => resize(), 0);\n    setTimeout(() => resize(), 200);\n    setTimeout(() => resize(), 500);\n\n    return () => window.removeEventListener(\"resize\", resize);\n  }, [resize]);\n\n  const getGroups = useCallback(\n    (groupedBackups) => {\n      return groupedBackups.map((backup, index) => {\n        const newGroup = {\n          name: backup.label,\n          id: backup.id,\n          children: [],\n        };\n\n        newGroup.children = Object.keys(backup.days).map((day) => (\n          <a\n            href={`${getSiteUrl()}api/backups/${\n              backup.name\n            }/${day}?type=Bearer&token=${token}`}\n            key={backup.id}\n            className={Style.added}\n            style={{ transitionDelay: (index + 1) * 200 }}\n          >\n            <Icon\n              style={{ width: \"1em\", height: \"1em\" }}\n              label={day}\n              icon=\"MdBackup\"\n              foreground=\"white\"\n              background=\"black\"\n              noClick\n              isSingle\n            />\n          </a>\n        ));\n        return newGroup;\n      });\n    },\n    [token]\n  );\n\n  if (!isLoggedIn) {\n    return <Loader />;\n  }\n\n  return (\n    <div className={Style.Apps}>\n      {isLoading ? (\n        <Icon\n          label=\"Loading\"\n          icon={() => <Loader iconStyle={{ fontSize: \"1em\" }} />}\n          foreground=\"white\"\n          background=\"transparent\"\n          noClick\n        />\n      ) : (\n        Object.entries(getGroups(backups)).map((entry) => {\n          groupsRef.current[entry[0]] = createRef();\n\n          return (\n            <div\n              ref={groupsRef.current[entry[0]]}\n              className={Style.Group}\n              groupid={entry[1].id > 0 ? entry[1].id : null}\n              key={entry[0]}\n            >\n              {entry[1].name && (\n                <div className={Style.GroupName}>{entry[1].name}</div>\n              )}\n              <div className={Style.GroupItems}>{entry[1].children}</div>\n            </div>\n          );\n        })\n      )}\n    </div>\n  );\n}\n\nexport default Backups;\n","export default __webpack_public_path__ + \"static/media/marker-yellow.580e042d.svg\";","export default __webpack_public_path__ + \"static/media/marker-green.3395ef82.svg\";","export default __webpack_public_path__ + \"static/media/marker-blue.ac43eb59.svg\";","export default __webpack_public_path__ + \"static/media/marker-red.dc478064.svg\";","import { chunk, findLast, isNil, last } from \"lodash\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Popup,\n  Polyline,\n  useMapEvents,\n} from \"react-leaflet\";\nimport Leaflet from \"leaflet\";\nimport \"leaflet.heat\";\nimport \"leaflet-routing-machine\";\nimport { getColorForPercentage, getDistance } from \"../utils\";\nimport Style from \"./Map.module.scss\";\nimport YellowIcon from \"./icons/marker-yellow.svg\";\nimport GreenIcon from \"./icons/marker-green.svg\";\nimport BlueIcon from \"./icons/marker-blue.svg\";\nimport RedIcon from \"./icons/marker-red.svg\";\nimport moment from \"moment\";\n\nconst controlsInstance = Leaflet.Control.extend({\n  options: {\n    position: \"topright\",\n  },\n\n  onAdd: function (map) {\n    const container = Leaflet.DomUtil.create(\"div\");\n    container.setAttribute(\"class\", \"leaflet-bar leaflet-control\");\n\n    const closeButton = Leaflet.DomUtil.create(\"a\");\n    closeButton.href = \"#\";\n    closeButton.title = \"Close\";\n    closeButton.innerHTML = \"Close\";\n    closeButton.classList.add(Style.closeButton);\n\n    closeButton.onclick = (e) => {\n      e.preventDefault();\n      this.options?.onClicks?.close?.(map);\n    };\n    container.append(closeButton);\n\n    // const snapButton = Leaflet.DomUtil.create(\"a\");\n    // snapButton.href = \"#\";\n    // snapButton.title = \"Snap to road\";\n    // snapButton.innerHTML = \"Snap to road\";\n    // snapButton.classList.add(Style.snapButton);\n\n    // snapButton.onclick = (e) => {\n    //   e.preventDefault();\n    //   this.options?.onClicks?.snap?.(map);\n    // };\n    // container.append(snapButton);\n\n    return container;\n  },\n});\n\nfunction MapController({ noControl, center, heatmapData, onClicks }) {\n  const lastCenter = useRef();\n  const heatmapLayer = useRef();\n  const map = useMapEvents({\n    // click: () => {\n    //   onClick?.(map);\n    // },\n    locationfound: (location) => {\n      console.log(\"location found:\", location);\n    },\n  });\n  const controlsContainer = useMemo(\n    () =>\n      new controlsInstance({\n        position: \"topright\",\n        onClicks,\n      }),\n    [onClicks]\n  );\n\n  useEffect(() => {\n    if (lastCenter.current !== JSON.stringify(center)) {\n      lastCenter.current = JSON.stringify(center);\n      map.setView(center);\n    }\n  }, [center, map]);\n\n  useEffect(() => {\n    const method = noControl ? \"disable\" : \"enable\";\n    map.scrollWheelZoom[method]?.();\n    map.dragging[method]?.();\n    map.zoomControl[method]?.();\n\n    if (!noControl) {\n      map.addControl(controlsContainer);\n    } else {\n      map.removeControl(controlsContainer);\n    }\n\n    return () => {\n      map?.removeControl(controlsContainer);\n    };\n  }, [noControl, map, controlsContainer]);\n\n  useEffect(() => {\n    if (heatmapData?.length) {\n      heatmapLayer.current?.removeFrom(map);\n      heatmapLayer.current = Leaflet.heatLayer(heatmapData).addTo(map);\n    } else {\n      heatmapLayer.current?.removeFrom(map);\n    }\n  }, [heatmapData, map]);\n\n  return null;\n}\n\nconst Map = ({\n  onClick,\n  className = \"\",\n  noControl = false,\n  width = null,\n  height = null,\n  data = [],\n  fullSize = false,\n  style = {},\n}) => {\n  const [map, setMap] = useState();\n  // const linesRenderer = useRef();\n  // const [selectedSegment, setSelectedSegment] = useState(\"\");\n  const linesRef = useRef({});\n  const linesCoordsRef = useRef({});\n  const routedLines = useRef({});\n  const controlsRef = useRef([]);\n  const markersRef = useRef({});\n  const speedMinMax = useMemo(() => {\n    const minMax = { min: 0, max: 0 };\n\n    data.forEach(({ payload }) => {\n      const absSpeed = Math.abs(parseInt(payload.Speed.value));\n      if (absSpeed < minMax.min) {\n        minMax.min = absSpeed;\n      }\n      if (absSpeed > minMax.max) {\n        minMax.max = absSpeed;\n      }\n    });\n\n    return minMax;\n  }, [data]);\n\n  const getSpeedPercent = useCallback(\n    (speed) => {\n      const absSpeed = Math.abs(parseInt(speed));\n\n      return absSpeed / ((speedMinMax.max - speedMinMax.min) / 100);\n    },\n    [speedMinMax.max, speedMinMax.min]\n  );\n\n  const heatmapData = useMemo(() => {\n    return data.map(({ value }) => [\n      parseFloat(value[0]),\n      parseFloat(value[1]),\n    ]);\n  }, [data]);\n\n  const polygonData = useMemo(() => {\n    const newData = [];\n\n    let segment = 0;\n    data.forEach(({ value, time, hasCharging, payload, today }, index) => {\n      if (!today) {\n        return;\n      }\n      const prevData = data[index - 1];\n      const nextData = data[index + 1];\n      const newPoint =\n        !prevData || moment(time).diff(prevData.time, \"minute\") > 5;\n      const lastPoint =\n        !nextData || moment(nextData.time).diff(time, \"minute\") > 5;\n\n      if (newPoint) {\n        segment++;\n      }\n\n      const segmentId = `segment-${segment}`;\n      const newDatum = {\n        payload,\n        time,\n        id: segmentId,\n        percent: getSpeedPercent(payload.Speed.value),\n        markerColor: hasCharging\n          ? \"yellow\"\n          : newPoint || index === 0\n          ? \"green\"\n          : lastPoint\n          ? \"red\"\n          : \"blue\",\n        color: !isNil(payload.Speed.value)\n          ? getColorForPercentage(getSpeedPercent(payload.Speed.value))\n          : \"black\",\n        start: newPoint ? null : prevData?.value,\n        end: value,\n        distance: prevData?.value ? getDistance(prevData?.value, value) : null,\n      };\n\n      newData.push(newDatum);\n    });\n\n    return newData;\n  }, [getSpeedPercent, data]);\n\n  const addLineToRef = useCallback((segmentId, index, line, coords) => {\n    if (!linesRef.current[segmentId]) {\n      linesRef.current[segmentId] = {};\n    }\n    linesRef.current[segmentId][index] = line;\n\n    const lineKey = JSON.stringify(coords);\n    linesCoordsRef.current[lineKey] = line;\n\n    // clearTimeout(linesRenderer.current);\n    // linesRenderer.current = setTimeout(getRoute, 1000);\n  }, []);\n\n  const addMarkerToRef = useCallback((segmentId, index, line) => {\n    if (!markersRef.current[segmentId]) {\n      markersRef.current[segmentId] = {};\n    }\n    markersRef.current[segmentId][index] = line;\n  }, []);\n\n  const selectSegment = useCallback(\n    (segmentId, hover = false, click = false) => {\n      Object.keys(linesRef.current).forEach((key) => {\n        Object.values(linesRef.current[key]).forEach((line) => {\n          line.setStyle({ opacity: !hover || key === segmentId ? 1 : 0 });\n          line.bringToFront();\n        });\n\n        Object.values(markersRef.current[key]).forEach((marker) => {\n          marker.setOpacity(!hover || key === segmentId ? 1 : 0);\n        });\n      });\n    },\n    []\n  );\n\n  const getIcon = useCallback((index, color) => {\n    let icon = BlueIcon;\n    if (color === \"red\") {\n      icon = RedIcon;\n    } else if (color === \"green\") {\n      icon = GreenIcon;\n    } else if (color === \"yellow\") {\n      icon = YellowIcon;\n    }\n    return new Leaflet.DivIcon({\n      className: Style.marker,\n      html: `<img class=\"${Style.markerIcon}\" src=\"${icon}\"/>\n              ${\n                index !== null\n                  ? `<div class=\"${Style.markerLabel}\">${index}</div>`\n                  : \"\"\n              }`,\n      iconSize: [32, 32],\n      iconAnchor: [16, 32],\n      popupAnchor: [0, -30],\n    });\n  }, []);\n\n  const lastDatum = useMemo(() => {\n    // return last(Object.values(polygonData).flat());\n    const lastPolygonDatum = last(polygonData);\n\n    if (lastPolygonDatum) {\n      return lastPolygonDatum;\n    }\n\n    const findAllDatum = findLast(data, ({ today }) => !today);\n\n    if (findAllDatum) {\n      return {\n        end: findAllDatum.value,\n      };\n    }\n\n    return undefined;\n  }, [data, polygonData]);\n\n  const center = useMemo(() => {\n    return lastDatum?.end;\n  }, [lastDatum]);\n\n  const onSnap = useCallback(() => {\n    if (!map || polygonData?.length <= 0 || !fullSize) {\n      controlsRef.current.forEach((loopControl) =>\n        map?.removeControl(loopControl)\n      );\n      return;\n    }\n    const lines = [];\n    const chunks = chunk(polygonData, 40);\n\n    chunks.forEach((lineChunks, index) => {\n      const coords = (\n        index === 0 && lineChunks[0].start ? [lineChunks[0].start] : []\n      ).concat(lineChunks.map((lineChunk) => lineChunk.end));\n      const keys = lineChunks.map((lineChunk) =>\n        JSON.stringify(\n          lineChunks[0].start\n            ? [lineChunk.start, lineChunk.end]\n            : [lineChunk.end]\n        )\n      );\n      if (lineChunks[index + 1]?.end) {\n        coords.push(lineChunks[index + 1].end);\n      }\n\n      const key = JSON.stringify(coords);\n\n      if (!routedLines.current[key]) {\n        const styles = lineChunks.map((lineChunk) => ({\n          color: lineChunk.color,\n          weight: 10,\n        }));\n        if (lineChunks[index + 1]?.end) {\n          styles.push(styles[styles.length - 1]);\n        }\n        console.log(\"ASD\", coords, styles);\n        const control = Leaflet.Routing.control({\n          waypoints: coords,\n          waypointMode: \"snap\",\n          fitSelectedRoutes: false,\n          show: true,\n          lineOptions: {\n            styles,\n          },\n          draggableWaypoints: false,\n          addWaypoints: false,\n          showAlternatives: false,\n          createStepsContainer: () => {},\n          createStep: () => {},\n          // itineraryFormatter: () => {},\n          createMarker: () => {},\n        }).addTo(map);\n\n        routedLines.current[key] = control;\n        controlsRef.current.push(control);\n\n        control.on(\"routeselected\", function (e) {\n          keys.forEach((lineKey) => {\n            linesCoordsRef.current[lineKey]?.removeFrom(map);\n          });\n        });\n      } else {\n        routedLines.current[key].addTo(map);\n      }\n    });\n\n    return lines;\n  }, [fullSize, map, polygonData]);\n\n  return (\n    <div\n      onClick={() => !fullSize && onClick?.(map)}\n      className={`${Style.Container} ${\n        fullSize ? Style.FullScreen : \"\"\n      } ${className}`}\n      style={{ width, height, ...style }}\n    >\n      <MapContainer\n        whenCreated={setMap}\n        center={center}\n        zoom={13}\n        doubleClickZoom={false}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        {fullSize ? (\n          <>\n            {/* {Object.values(polygonData ?? {})\n                .flat() */}\n            {polygonData?.map(\n              (\n                {\n                  start,\n                  end,\n                  color,\n                  payload,\n                  time,\n                  markerColor,\n                  id: segmentId,\n                },\n                index\n              ) => {\n                return (\n                  <>\n                    {start && end ? (\n                      <Polyline\n                        ref={(ref) =>\n                          addLineToRef(segmentId, index, ref, [start, end])\n                        }\n                        pathOptions={{\n                          color,\n                          stroke: true,\n                        }}\n                        className={`${Style.line} ${segmentId}`}\n                        eventHandlers={\n                          {\n                            // mouseover: () => selectSegment(segmentId, true),\n                            // mouseout: () => selectSegment(segmentId, false),\n                            // click: () =>\n                            //   selectSegment(\n                            //     segmentId,\n                            //     true,\n                            //     segmentId !== selectedSegment\n                            //   ),\n                          }\n                        }\n                        positions={[start, end]}\n                        weight={10}\n                      />\n                    ) : null}\n                    {(index === 0 && polygonData?.length > 1\n                      ? [start, end]\n                      : [null, end]\n                    ).map(\n                      (pos, posInd) =>\n                        pos && (\n                          <Marker\n                            ref={(ref) =>\n                              addMarkerToRef(segmentId, index + posInd + 1, ref)\n                            }\n                            position={pos}\n                            icon={getIcon(\n                              index + posInd,\n                              posInd === 0 && markerColor !== \"yellow\"\n                                ? \"green\"\n                                : markerColor\n                            )}\n                            eventHandlers={{\n                              mouseover: () => selectSegment(segmentId, true),\n                              mouseout: () => selectSegment(segmentId, false),\n                              // click: () =>\n                              //   selectSegment(\n                              //     segmentId,\n                              //     true,\n                              //     segmentId !== selectedSegment\n                              //   ),\n                            }}\n                          >\n                            <Popup>\n                              <div class={Style.marketPopupTitle}>\n                                Location at {time}\n                              </div>\n                              {Object.entries(payload).map(\n                                ([key, { value, appendix }]) => (\n                                  <div className={Style.markerPopupDetail}>\n                                    <b>{key}: </b>\n                                    {value}\n                                    {appendix}\n                                  </div>\n                                )\n                              )}\n                            </Popup>\n                          </Marker>\n                        )\n                    )}\n                  </>\n                );\n              }\n            )}\n          </>\n        ) : (\n          <Marker position={lastDatum?.end} icon={getIcon(null, \"blue\")}>\n            {/* <Popup>\n              <div class={Style.marketPopupTitle}>\n                Location at {lastDatum.time}\n              </div>\n              {Object.entries(lastDatum.payload).map(\n                ([key, { value, appendix }]) => (\n                  <div className={Style.markerPopupDetail}>\n                    <b>{key}: </b>\n                    {value}\n                    {appendix}\n                  </div>\n                )\n              )}\n            </Popup> */}\n          </Marker>\n        )}\n        <MapController\n          onClicks={{ close: onClick, snap: onSnap }}\n          noControl={noControl}\n          heatmapData={fullSize ? heatmapData : []}\n          center={center}\n        />\n      </MapContainer>\n    </div>\n  );\n};\n\nexport default Map;\n","import { debounce, isNil, last, uniqBy } from \"lodash\";\nimport { useEffect, useState, useCallback, useRef, useMemo } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Style from \"../App.module.scss\";\nimport { ENABLED_PAGES, getSiteUrl } from \"../config\";\nimport useTemplates from \"../hooks/use-templates\";\nimport {\n  getChartData,\n  getPageUrl,\n  isDatumEnableInChart,\n  isLocalhost,\n  isTrue,\n} from \"../utils\";\nimport ActionChart, { chartColors } from \"./ActionChart\";\nimport Loader from \"./Loader\";\nimport LottieIcon from \"./LottieIcon\";\nimport Map from \"./Map\";\n\nconst TIMER = 60;\nfunction ActionRun({\n  runner,\n  isLoggedIn,\n  token,\n  credentials,\n  isDone,\n  fullScreen,\n  setFullScreen,\n}) {\n  const [commandState, setCommandState] = useState(!isDone && \"loading\");\n  const [signalController, setSignalController] = useState(null);\n  const [responses, setResponses] = useState(null);\n  const [mapTop, setMapTop] = useState(0);\n  const responsesRef = useRef(null);\n  // const [templates, setTemplates] = useState([]);\n  const periodicalCounter = useRef(0);\n  const launch = useRef();\n  const secLeft = useRef(TIMER);\n  const [time, setTime] = useState(TIMER);\n  const [canMoveBack, setCanMoveBack] = useState(false);\n  const [runnerData, setRunnerData] = useState({\n    data: runner?.data ?? [],\n    dataMax: runner?.dataMax ?? {},\n    dataMin: runner?.dataMin ?? {},\n  });\n\n  const { templates, parseTemplates } = useTemplates();\n\n  const setAll = useCallback(\n    (state) => {\n      setCommandState(state);\n      setTimeout(() => setMapTop(!fullScreen ? window.scrollY : 0), 10);\n    },\n    [fullScreen]\n  );\n\n  const templateColors = useMemo(() => {\n    const colors = uniqBy(\n      (runner?.data ?? []).filter((curr) => isDatumEnableInChart(curr)),\n      \"template_id\"\n    ).reduce((acc, curr, index) => {\n      return {\n        ...acc,\n        [curr.template_id]: chartColors[index % chartColors.length],\n      };\n    }, {});\n\n    return colors;\n  }, [runner?.data]);\n\n  const decrement = useCallback(() => {\n    if (secLeft.current > 0) {\n      secLeft.current--;\n      setTime(secLeft.current);\n\n      if (secLeft.current <= 0) {\n        clearInterval(launch.current);\n        setCanMoveBack(true);\n      }\n    }\n  }, [secLeft]);\n\n  useEffect(() => {\n    const resize = debounce(() => setMapTop(window.scrollY), 100, {\n      trailing: true,\n    });\n\n    window.addEventListener(\"scroll\", resize);\n\n    return () => window.removeEventListener(\"scroll\", resize);\n  }, []);\n\n  const runAction = useCallback(\n    (next = null, inBackground = false, counter = 0) => {\n      if (!runner || !isLoggedIn || !token) {\n        return Promise.reject();\n      }\n\n      if (commandState !== \"executing\") {\n        setAll(!inBackground ? \"executing\" : \"executing-background\");\n      }\n\n      const controller = new AbortController();\n      const signal = controller.signal;\n\n      setSignalController(controller);\n\n      return fetch(\n        `${getSiteUrl()}api/runner/${runner.key}?async=1${\n          inBackground\n            ? `&periodicalCounter=${counter}&update=1&count=${runner?.data?.length}`\n            : \"\"\n        }`,\n        {\n          signal,\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n          ...(next ? { body: JSON.stringify({ next }) } : {}),\n        }\n      )\n        .then((resp) => resp.json())\n        .then((data) => {\n          concatResponses(data.responses, !!next, {\n            main: {\n              status: data.status,\n              statusText: data.statusText,\n            },\n          });\n\n          if (data.runner.data?.length) {\n            setRunnerData({\n              data: data.runner.data,\n              dataMax: data.runner.dataMax ?? {},\n              dataMin: data.runner.dataMin ?? {},\n            });\n          }\n\n          if (data.status === 200) {\n            setAll(data.next ? \"executing-next\" : \"executed\");\n          } else {\n            setAll(\"failed\");\n          }\n\n          if (!data.next) {\n            startTimer();\n          } else {\n            runAction(data.next);\n          }\n        })\n        .catch((e) => {\n          console.error(e);\n          responsesRef.current = null;\n          setResponses(null);\n          setAll(\"failed\");\n          startTimer();\n        });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [runner]\n  );\n  const periodicalFetch = useCallback(() => {\n    if (secLeft.current > 0) {\n      secLeft.current--;\n      setTime(secLeft.current);\n    } else if (secLeft.current <= 0) {\n      runAction(null, true, periodicalCounter.current++);\n      clearInterval(launch.current);\n      secLeft.current = 10;\n      launch.current = setInterval(periodicalFetch, 1000);\n    }\n  }, [runAction]);\n\n  const startTimer = useCallback(() => {\n    if (!isTrue(runner?.single)) {\n      clearInterval(launch.current);\n      launch.current = setInterval(decrement, 1000);\n    } else if (isTrue(runner?.periodical)) {\n      clearInterval(launch.current);\n      secLeft.current = 10;\n      launch.current = setInterval(periodicalFetch, 1000);\n    }\n  }, [decrement, periodicalFetch, runner?.periodical, runner?.single]);\n\n  const resetTimer = useCallback(() => {\n    clearInterval(launch.current);\n    secLeft.current = TIMER;\n    setTime(secLeft.current);\n  }, [secLeft]);\n\n  useEffect(() => {\n    return () => {\n      clearInterval(launch.current);\n    };\n  }, []);\n\n  const concatResponses = useCallback(\n    (newResponses, shouldDo = false, spread = {}) => {\n      const updatedResponses = (\n        shouldDo && responsesRef.current ? responsesRef.current : []\n      )\n        .concat(Object.values(newResponses ?? {}))\n        .map((response) => ({\n          ...response,\n          ...spread,\n        }));\n      responsesRef.current = updatedResponses;\n      setResponses(updatedResponses);\n    },\n    []\n  );\n\n  useEffect(() => {\n    if (runner && commandState === \"loading\") {\n      parseTemplates();\n      runAction();\n    } else if (\n      runner &&\n      [\"executing-next\", \"executing-background\", \"executed\", \"failed\"].includes(\n        commandState\n      )\n    ) {\n      parseTemplates(responses, runner.templates);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [commandState, parseTemplates, responses, runAction, runner]);\n\n  const isDark = useCallback((index, template) => {\n    if (index % 2) {\n      return true;\n    }\n\n    return false;\n  }, []);\n\n  const dataPack = useMemo(() => {\n    return {\n      min: runnerData.dataMin,\n      max: runnerData.dataMax,\n      data: runnerData.data,\n    };\n  }, [runnerData.data, runnerData.dataMax, runnerData.dataMin]);\n\n  const chartData = useMemo(() => getChartData(dataPack.data), [dataPack.data]);\n\n  const mainLevelTemplates = useMemo(\n    () =>\n      templates.reduce(\n        (acc, curr) => ({\n          ...acc,\n          [curr.templateId]: curr,\n        }),\n        {}\n      ),\n    [templates]\n  );\n  const mapData = useMemo(() => {\n    const payloads = {};\n    const data = (dataPack.data ?? []).reduce((acc, datum) => {\n      if (!payloads[datum.time]) {\n        payloads[datum.time] = {};\n      }\n\n      const templateLabel =\n        mainLevelTemplates[datum.template_id]?.label ?? datum.template_id;\n\n      // TODO ide jon hogy az uj valuet is parsoljuk\n      payloads[datum.time][templateLabel] = {\n        ...mainLevelTemplates[datum.template_id],\n        value: datum.value,\n      };\n\n      if (datum.formatter !== \"map\") {\n        return acc;\n      }\n      return [\n        ...acc,\n        {\n          value: datum.value.split(\",\"),\n          time: datum.time,\n          today: isTrue(datum.today),\n          payload: payloads[datum.time],\n        },\n      ];\n    }, []);\n\n    const newData = [];\n    data.forEach((datum, index) => {\n      const nextDatum = data[index + 1];\n      if (!datum?.payload?.[\"Charging type\"]) {\n        newData.push(datum);\n        return;\n      }\n\n      if (!nextDatum?.payload?.[\"Charging type\"]) {\n        newData.push({ hasCharging: true, ...datum });\n      }\n    });\n\n    return newData;\n  }, [dataPack.data, mainLevelTemplates]);\n\n  const onClickMap = useCallback(\n    (map) => {\n      const { value: center } = last(mapData);\n      setMapTop(!fullScreen ? window.scrollY : 0);\n      setFullScreen(!fullScreen);\n      setTimeout(() => map.setView(center, 13), 200);\n    },\n    [fullScreen, mapData, setFullScreen]\n  );\n\n  const renderTemplates = useCallback(\n    (templateArray, counter = { index: 0 }) => {\n      return (templateArray ?? templates).map((template) => {\n        if (template.hidden) {\n          return null;\n        }\n        counter.index++;\n\n        return (\n          <div\n            key={template.id}\n            className={`${Style.templateWrapper} ${\n              isDark(counter.index, template) ? Style.dark : \"\"\n            }`}\n          >\n            <div\n              className={`${Style.template} ${\n                template.level > 0\n                  ? `${Style.childTemplate} ${Style[`level-${template.level}`]}`\n                  : \"\"\n              } ${Style[template.formatter]}`}\n              style={{ color: templateColors[template?.templateId] ?? null }}\n              key={template.label}\n            >\n              {template.formatter === \"map\" ? (\n                <Map\n                  onClick={onClickMap}\n                  noControl={!fullScreen}\n                  style={{ top: fullScreen ? mapTop : null }}\n                  fullSize={fullScreen}\n                  data={mapData}\n                />\n              ) : (\n                <>\n                  <span className={Style.label}>{template.label}</span>\n                  <span className={Style.value}>\n                    {template.value}\n                    <span className={Style.appendix}>\n                      {!isNil(template.value) && template.appendix\n                        ? ` ${template.appendix}`\n                        : \"\"}\n                    </span>\n                  </span>\n                </>\n              )}\n            </div>\n            {template.children?.length > 0\n              ? renderTemplates(template.children, counter)\n              : null}\n          </div>\n        );\n      });\n    },\n    [fullScreen, isDark, mapData, mapTop, onClickMap, templateColors, templates]\n  );\n\n  if (\n    commandState === \"executing\" &&\n    !isDone &&\n    !isLocalhost() &&\n    !isTrue(runner.single)\n  ) {\n    return (\n      <Redirect\n        to={getPageUrl(\n          ENABLED_PAGES.actions,\n          credentials,\n          `${runner.key}/done`\n        )}\n      />\n    );\n  }\n\n  if (canMoveBack || !commandState) {\n    return <Redirect to={getPageUrl(ENABLED_PAGES.actions, credentials)} />;\n  }\n\n  if (!isLoggedIn) {\n    return <Loader />;\n  }\n\n  return (\n    <div className={`${Style.Action}`}>\n      {runner ? (\n        <h2>\n          <span>\n            {[\"executing-next\", \"executing-background\", \"executing\"].includes(\n              commandState\n            )\n              ? \"Executing\"\n              : \"\"}{\" \"}\n            \"\n          </span>\n          {runner.groupName ? runner.groupName + \" / \" : \"\"}\n          {runner.name}\n          <span>\n            \"{\" \"}\n            {[\"executed\", \"failed\"].includes(commandState) ? commandState : \"\"}\n          </span>\n        </h2>\n      ) : (\n        <h2>Loading</h2>\n      )}\n      {[\n        \"executing-next\",\n        \"executing-background\",\n        \"executing\",\n        \"loading\",\n      ].includes(commandState) && <Loader />}\n      {commandState === \"executed\" && (\n        <LottieIcon name=\"Success\" keepLastFrame />\n      )}\n      {commandState === \"failed\" && <LottieIcon name=\"Failed\" keepLastFrame />}\n\n      <div className={Style.templates}>{renderTemplates()}</div>\n\n      {chartData.length &&\n      [\"executing-background\", \"executed\"].includes(commandState) ? (\n        <div className={Style.chart}>\n          <ActionChart\n            data={chartData}\n            dataMax={dataPack.max}\n            dataMin={dataPack.min}\n            templates={runner.templates}\n            color={templateColors}\n          />\n        </div>\n      ) : null}\n\n      <div className={Style.buttons}>\n        <Link\n          to={getPageUrl(ENABLED_PAGES.actions, credentials)}\n          onClick={() => signalController?.abort?.()}\n        >\n          {[\"executed\", \"failed\"].includes(commandState)\n            ? \"Back to actions\" + (isTrue(runner.single) ? \"\" : `in ${time}s`)\n            : \"Cancel\"}\n        </Link>\n        {[\"executed\", \"failed\"].includes(commandState) && (\n          <button\n            style={{\n              opacity: isTrue(runner.periodical) ? 1 : time / TIMER,\n            }}\n            onClick={() => {\n              resetTimer();\n              setAll(\"loading\");\n            }}\n          >\n            Run again {!isTrue(runner.periodical) ? \"\" : `in ${time}s`}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ActionRun;\n","import PropTypes from \"prop-types\";\nimport Style from \"./Loader.module.scss\";\nimport LottieIcon from \"./LottieIcon\";\n\nexport function LoaderWhite({\n  label,\n  hidden = false,\n  className = \"\",\n  iconClassName = \"\",\n  iconStyle = {},\n  ...props\n}) {\n  return hidden ? null : (\n    <div className={`${Style.loader} ${className}`} {...props}>\n      <span className={Style.title}>{label}</span>\n      <LottieIcon name=\"LoadingWhite\" loop />\n    </div>\n  );\n}\n\nLoaderWhite.propTypes = {\n  label: PropTypes.string,\n  hidden: PropTypes.bool,\n  className: PropTypes.string,\n  iconClassName: PropTypes.string,\n};\n\nexport default LoaderWhite;\n","import Style from \"./App.module.scss\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport Apps from \"./components/Apps\";\nimport Actions from \"./components/Actions\";\nimport Backups from \"./components/Backups\";\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\nimport ActionRun from \"./components/ActionRun\";\nimport { DISABLE_AUTHORIZATION, ENABLED_PAGES, getSiteUrl } from \"./config\";\nimport sha1 from \"sha1\";\nimport ls from \"local-storage\";\nimport LottieIcon from \"./components/LottieIcon\";\nimport { getPagePath, getPageUrl } from \"./utils\";\nimport PullToRefresh from \"react-simple-pull-to-refresh\";\nimport LoaderWhite from \"./components/Loader-White\";\nimport { NavTab } from \"react-router-tabs\";\n\nfunction App() {\n  // const [credentials, setCredentials] = useState({ username: null, key: null });\n  const [token, setToken] = useState(ls(\"token\") ?? \"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [runners, setRunners] = useState(ls(\"runners\"));\n  const [apps, setApps] = useState(ls(\"apps\"));\n  const [backups, setBackups] = useState(ls(\"backups\"));\n  const [fullScreen, setIsFullScreen] = useState(false);\n\n  const queryString = useMemo(\n    () => new URLSearchParams(window.location.search),\n    []\n  );\n\n  const handleToken = useCallback((data) => {\n    setIsLoggedIn(data?.token ? true : false);\n    setToken(data?.token ?? null);\n    ls(\"token\", data?.token ?? \"\");\n  }, []);\n\n  const credentials = useMemo(() => {\n    const checkRegex = new RegExp(\n      `^/auth/(?<username>[a-zA-Z0-9]+)/(?<key>[a-zA-Z0-9]+)(?<path>/?$|/(${Object.values(\n        ENABLED_PAGES\n      ).join(\"|\")}).*$)`\n    );\n    const checkCredentials = window.location.pathname.match(checkRegex)?.groups;\n    if (queryString.get(\"username\") && queryString.get(\"key\")) {\n      return {\n        username: queryString.get(\"username\"),\n        key: queryString.get(\"key\"),\n        path: window.location.pathname,\n      };\n    } else if (checkCredentials?.username && checkCredentials?.key) {\n      return {\n        username: checkCredentials?.username,\n        key: checkCredentials?.key,\n        path: checkCredentials?.path,\n      };\n    }\n\n    return { path: window.location.pathname };\n  }, [queryString]);\n\n  const setFullScreen = useCallback((state) => {\n    if (state) {\n      document.body.classList.add(Style.fullScreen);\n    } else {\n      document.body.classList.remove(Style.fullScreen);\n    }\n    setTimeout(() => {\n      setIsFullScreen(state);\n      window.dispatchEvent(new Event(\"resize\"));\n    }, 100);\n  }, []);\n\n  useEffect(() => {\n    document.body.addEventListener(\"mousedown\", console.log);\n    document.body.addEventListener(\"mouseup\", console.log);\n  }, []);\n\n  useEffect(() => {\n    ls(\"lastFetched\", null);\n    if (\n      (DISABLE_AUTHORIZATION || (credentials?.username && credentials?.key)) &&\n      !token\n    ) {\n      fetch(`${getSiteUrl()}api/auth`, {\n        method: \"POST\",\n        body: JSON.stringify(\n          DISABLE_AUTHORIZATION\n            ? {}\n            : {\n                username: credentials.username,\n                key: sha1(credentials.key),\n              }\n        ),\n      })\n        .then((resp) => resp.json())\n        .then(handleToken)\n        .catch(handleToken);\n    } else if (token) {\n      fetch(`${getSiteUrl()}api/runners`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n        .then((resp) => resp.json())\n        .then((data) => {\n          if (data.status === 200 && data.runners) {\n            setIsLoggedIn(true);\n            setRunners(data.runners ?? []);\n            ls(\"runners\", data.runners ?? []);\n          } else {\n            handleToken();\n          }\n        })\n        .catch(handleToken);\n      fetch(`${getSiteUrl()}api/apps`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n        .then((resp) => resp.json())\n        .then((data) => {\n          if (data.status === 200 && data.apps) {\n            setIsLoggedIn(true);\n            setApps(data.apps ?? []);\n            ls(\"apps\", data.apps ?? []);\n          } else {\n            handleToken();\n          }\n        })\n        .catch(handleToken);\n      fetch(`${getSiteUrl()}api/backups`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n        .then((resp) => resp.json())\n        .then((data) => {\n          if (data.status === 200 && data.backups) {\n            setIsLoggedIn(true);\n            setBackups(data.backups ?? []);\n            ls(\"backups\", data.backups ?? []);\n          } else {\n            handleToken();\n          }\n        })\n        .catch(handleToken);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [token]);\n\n  return (\n    <div\n      className={Style.App}\n      // onMouseDown={handleMouse}\n      // onTouchStart={handleMouse}\n      // onMouseUp={handleMouse}\n      // onTouchEnd={handleMouse}\n    >\n      {!isLoggedIn && (\n        <>\n          <h1>Login required</h1>\n          <LottieIcon name=\"Failed\" keepLastFrame />\n        </>\n      )}\n      <PullToRefresh\n        onRefresh={() => setTimeout(() => window.location.reload(), 1000)}\n        className={Style.PTR}\n        isPullable={!fullScreen}\n        pullingContent={\n          <div style={{ textAlign: \"center\", padding: 10 }}>\n            Pull to refresh\n          </div>\n        }\n        refreshingContent={\n          <LoaderWhite style={{ width: 50, height: 50, margin: \"5px auto\" }} />\n        }\n      >\n        {isLoggedIn && (\n          <Router>\n            <div className={Style.titles}>\n              {runners?.length > 1 ? (\n                <NavTab\n                  activeClassName={Style.active}\n                  to={getPageUrl(ENABLED_PAGES.actions, credentials)}\n                >\n                  Actions\n                </NavTab>\n              ) : null}\n              {apps?.length ? (\n                <NavTab\n                  activeClassName={Style.active}\n                  to={getPageUrl(ENABLED_PAGES.apps, credentials)}\n                >\n                  Apps\n                </NavTab>\n              ) : null}\n              {backups?.length ? (\n                <NavTab\n                  activeClassName={Style.active}\n                  to={getPageUrl(ENABLED_PAGES.backups, credentials)}\n                >\n                  Backups\n                </NavTab>\n              ) : null}\n            </div>\n            <Switch>\n              <Route\n                path={getPagePath(\n                  ENABLED_PAGES.actions,\n                  credentials,\n                  \":action/:state?\"\n                )}\n                render={(props) => {\n                  const selectedRunner = runners?.find(\n                    (runner) => runner.key === props.match?.params?.action\n                  );\n\n                  if (runners && !selectedRunner) {\n                    return (\n                      <Redirect\n                        to={getPageUrl(ENABLED_PAGES.actions, credentials)}\n                      />\n                    );\n                  }\n\n                  return (\n                    <ActionRun\n                      runner={selectedRunner}\n                      isLoggedIn={isLoggedIn}\n                      isDone={props.match?.params?.state === \"done\"}\n                      token={token}\n                      credentials={credentials}\n                      fullScreen={fullScreen}\n                      setFullScreen={setFullScreen}\n                    />\n                  );\n                }}\n              />\n              <Route path={getPagePath(ENABLED_PAGES.apps, credentials)}>\n                <Apps isLoggedIn={isLoggedIn} apps={apps} />\n              </Route>\n              <Route path={getPagePath(ENABLED_PAGES.backups, credentials)}>\n                <Backups\n                  backups={backups}\n                  isLoggedIn={isLoggedIn}\n                  credentials={credentials}\n                  token={token}\n                />\n              </Route>\n              <Route\n                path={getPagePath(\"\", credentials).concat(\n                  getPagePath(ENABLED_PAGES.actions, credentials)\n                )}\n              >\n                <Actions\n                  runners={runners}\n                  isLoggedIn={isLoggedIn}\n                  credentials={credentials}\n                  token={token}\n                />\n              </Route>\n            </Switch>\n          </Router>\n        )}\n      </PullToRefresh>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Map_Container__3S9-y\",\"FullScreen\":\"Map_FullScreen__110tT\",\"closeButton\":\"Map_closeButton__1FAGp\",\"snapButton\":\"Map_snapButton__2535v\",\"marker\":\"Map_marker__1kwLn\",\"markerIcon\":\"Map_markerIcon__1PUvJ\",\"markerLabel\":\"Map_markerLabel__1yoJH\",\"markerPopupTitle\":\"Map_markerPopupTitle__3uKDx\",\"line\":\"Map_line__3MaIW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Tooltip\":\"ActionChart_Tooltip__28gTl\",\"Label\":\"ActionChart_Label__30PPu\",\"Items\":\"ActionChart_Items__1Q_NT\",\"Item\":\"ActionChart_Item__1MGFd\",\"Name\":\"ActionChart_Name__3OuP3\",\"Value\":\"ActionChart_Value__20Bdm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__d9YUC\",\"loaderIcon\":\"Loader_loaderIcon__jyT64\",\"spin\":\"Loader_spin__1zRst\"};"],"sourceRoot":""}